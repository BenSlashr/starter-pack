---
import '@/styles/global.css';
import BaseLayout from '@/layouts/BaseLayout.astro';
import Navbar from '@/components/Navbar.astro';
import Footer from '@/components/Footer.astro';

// TODO: Replace with your actual tools
const tools = [
  {
    title: 'Quiz interactif',
    description: "Testez vos connaissances avec des quiz integres dans chaque guide. Score, explications, progression.",
    href: '#quiz',
    category: 'apprendre',
    icon: 'M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z',
    featured: true,
  },
  {
    title: 'Arbre de decision',
    description: "Repondez a quelques questions et obtenez une recommandation personnalisee parmi vos options.",
    href: '#decision-tree',
    category: 'choisir',
    icon: 'M8 9l4-4 4 4m0 6l-4 4-4-4',
    featured: true,
  },
  {
    title: 'Comparateur',
    description: "Comparez 2 a 4 produits ou services cote a cote : scores, avantages, inconvenients.",
    href: '#comparateur',
    category: 'comparer',
    icon: 'M3 6l3 1m0 0l-3 9a5.002 5.002 0 006.001 0M6 7l3 9M6 7l6-2m6 2l3-1m-3 1l-3 9a5.002 5.002 0 006.001 0M18 7l3 9m-3-9l-6-2m0-2v2m0 16V5m0 16H9m3 0h3',
    featured: true,
  },
];

const categories = [
  { id: 'apprendre', label: 'Apprendre', color: 'text-primary', bg: 'bg-primary/10 border-primary/20', dot: 'bg-primary' },
  { id: 'choisir', label: 'Choisir', color: 'text-secondary-light', bg: 'bg-secondary/10 border-secondary/20', dot: 'bg-secondary' },
  { id: 'comparer', label: 'Comparer', color: 'text-info', bg: 'bg-info/10 border-info/20', dot: 'bg-info' },
];

const getCat = (id: string) => categories.find(c => c.id === id)!;

const catAccent: Record<string, { border: string; iconBg: string; iconColor: string }> = {
  apprendre: { border: 'hover:border-primary/40', iconBg: 'bg-primary/10 border-primary/20', iconColor: 'text-primary' },
  choisir:   { border: 'hover:border-secondary/40', iconBg: 'bg-secondary/10 border-secondary/20', iconColor: 'text-secondary-light' },
  comparer:  { border: 'hover:border-info/40', iconBg: 'bg-info/10 border-info/20', iconColor: 'text-info' },
};

// TODO: Customize FAQ
const faq = [
  {
    q: 'Les outils sont-ils gratuits ?',
    a: "Oui, tous les outils sont 100% gratuits, sans inscription et sans publicite. Tous les calculs se font dans votre navigateur.",
  },
  {
    q: 'Mes donnees sont-elles en securite ?',
    a: "Aucune donnee ne quitte votre navigateur. Les outils fonctionnent entierement cote client (JavaScript). Nous ne stockons aucune information.",
  },
  {
    q: 'Puis-je proposer un nouvel outil ?',
    a: "Bien sur ! Contactez-nous via la page contact avec votre idee.",
  },
];
---

<BaseLayout
  title="Outils gratuits | MySite"
  description="Outils interactifs gratuits : quiz, arbre de decision, comparateur. Sans inscription, 100% prives."
>
  <Navbar />

  <main id="main-content">
    <!-- HERO -->
    <section class="pt-32 pb-20 relative">
      <div class="absolute inset-0 bg-gradient-to-b from-primary/5 via-secondary/5 to-transparent pointer-events-none"></div>

      <div class="max-w-5xl mx-auto px-4 sm:px-6 lg:px-8 relative z-10">
        <!-- Breadcrumb -->
        <nav class="flex items-center gap-2 text-sm text-text-muted mb-8" aria-label="Fil d'ariane">
          <a href="/" class="hover:text-primary transition-colors cursor-pointer">Accueil</a>
          <span>/</span>
          <span class="text-text-secondary">Outils</span>
        </nav>

        <div class="text-center">
          <div class="inline-flex items-center gap-2 px-4 py-1.5 mb-6 text-xs font-medium bg-primary/10 text-primary border border-primary/20 rounded-full">
            <span class="w-1.5 h-1.5 rounded-full bg-primary animate-pulse"></span>
            {tools.length} outils gratuits
          </div>

          <h1 class="font-display font-800 text-4xl sm:text-5xl lg:text-6xl leading-[1.1] mb-5 tracking-tight">
            Nos outils <span class="text-gradient-primary">interactifs</span>
          </h1>

          <p class="text-lg sm:text-xl text-text-secondary leading-relaxed max-w-2xl mx-auto mb-8">
            {/* TODO: Replace with your tools description */}
            Quiz, comparateurs, arbres de decision. Tout fonctionne dans votre navigateur, sans compte, sans pub.
          </p>

          <!-- Category pills -->
          <div class="flex flex-wrap items-center justify-center gap-3">
            {categories.map(cat => (
              <span class={`inline-flex items-center gap-2 px-3 py-1.5 text-xs font-medium ${cat.bg} border rounded-full ${cat.color}`}>
                <span class={`w-1.5 h-1.5 rounded-full ${cat.dot}`}></span>
                {cat.label}
              </span>
            ))}
          </div>
        </div>
      </div>
    </section>

    <!-- ALL TOOLS -->
    <section class="pb-16">
      <div class="max-w-5xl mx-auto px-4 sm:px-6 lg:px-8">
        <h2 class="font-display font-700 text-h2 mb-6">
          Tous les <span class="text-gradient-primary">outils</span>
        </h2>

        <div class="grid grid-cols-1 md:grid-cols-3 gap-5">
          {tools.map((tool) => {
            const accent = catAccent[tool.category];
            const cat = getCat(tool.category);
            return (
              <a
                href={tool.href}
                class={`group relative flex flex-col p-6 rounded-xl border border-border bg-surface-raised/40 ${accent.border} hover:bg-surface-hover/60 transition-all cursor-pointer hover:shadow-card`}
              >
                <div class="flex items-center justify-between mb-4">
                  <div class={`w-12 h-12 rounded-xl ${accent.iconBg} border flex items-center justify-center`}>
                    <svg class={`w-6 h-6 ${accent.iconColor}`} fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="1.5">
                      <path stroke-linecap="round" stroke-linejoin="round" d={tool.icon} />
                    </svg>
                  </div>
                  <span class={`px-2 py-0.5 text-[10px] font-mono ${cat.bg} border rounded ${cat.color}`}>
                    {cat.label}
                  </span>
                </div>

                <h3 class="font-display font-700 text-lg text-text-primary group-hover:text-primary transition-colors mb-2">
                  {tool.title}
                </h3>
                <p class="text-sm text-text-secondary leading-relaxed flex-1">
                  {tool.description}
                </p>

                <div class="mt-4 flex items-center gap-2 text-sm font-medium text-primary opacity-0 group-hover:opacity-100 transition-opacity">
                  Ouvrir l'outil
                  <svg class="w-4 h-4" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                    <path stroke-linecap="round" stroke-linejoin="round" d="M13 7l5 5m0 0l-5 5m5-5H6" />
                  </svg>
                </div>
              </a>
            );
          })}
        </div>
      </div>
    </section>

    <!-- FEATURES BAR -->
    <section class="pb-16">
      <div class="max-w-5xl mx-auto px-4 sm:px-6 lg:px-8">
        <div class="grid grid-cols-2 sm:grid-cols-4 gap-4">
          <div class="flex flex-col items-center gap-2 p-5 rounded-xl border border-border-subtle bg-surface/40 text-center">
            <svg class="w-6 h-6 text-primary" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="1.5">
              <path stroke-linecap="round" stroke-linejoin="round" d="M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z" />
            </svg>
            <span class="text-sm font-medium text-text-primary">100% prive</span>
            <span class="text-xs text-text-muted">Calculs dans le navigateur</span>
          </div>
          <div class="flex flex-col items-center gap-2 p-5 rounded-xl border border-border-subtle bg-surface/40 text-center">
            <svg class="w-6 h-6 text-secondary-light" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="1.5">
              <path stroke-linecap="round" stroke-linejoin="round" d="M18.364 5.636l-3.536 3.536m0 5.656l3.536 3.536M9.172 9.172L5.636 5.636m3.536 9.192l-3.536 3.536M21 12a9 9 0 11-18 0 9 9 0 0118 0zm-5 0a4 4 0 11-8 0 4 4 0 018 0z" />
            </svg>
            <span class="text-sm font-medium text-text-primary">Sans inscription</span>
            <span class="text-xs text-text-muted">Aucun compte requis</span>
          </div>
          <div class="flex flex-col items-center gap-2 p-5 rounded-xl border border-border-subtle bg-surface/40 text-center">
            <svg class="w-6 h-6 text-positive" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="1.5">
              <path stroke-linecap="round" stroke-linejoin="round" d="M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z" />
            </svg>
            <span class="text-sm font-medium text-text-primary">Gratuit</span>
            <span class="text-xs text-text-muted">Pas de version payante</span>
          </div>
          <div class="flex flex-col items-center gap-2 p-5 rounded-xl border border-border-subtle bg-surface/40 text-center">
            <svg class="w-6 h-6 text-info" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="1.5">
              <path stroke-linecap="round" stroke-linejoin="round" d="M10 20l4-16m4 4l4 4-4 4M6 16l-4-4 4-4" />
            </svg>
            <span class="text-sm font-medium text-text-primary">Open source</span>
            <span class="text-xs text-text-muted">Code source accessible</span>
          </div>
        </div>
      </div>
    </section>

    <!-- FAQ -->
    <section class="pb-16">
      <div class="max-w-3xl mx-auto px-4 sm:px-6 lg:px-8">
        <h2 class="font-display font-700 text-h2 mb-6">Questions frequentes</h2>
        <div class="space-y-4">
          {faq.map(item => (
            <details class="group rounded-xl border border-border bg-surface-raised/30 overflow-hidden">
              <summary class="flex items-center justify-between p-5 cursor-pointer font-display font-600 text-body text-text-primary group-hover:text-primary transition-colors list-none [&::-webkit-details-marker]:hidden">
                {item.q}
                <svg class="w-5 h-5 text-text-muted flex-shrink-0 ml-4 group-open:rotate-180 transition-transform" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                  <path stroke-linecap="round" stroke-linejoin="round" d="M19 9l-7 7-7-7" />
                </svg>
              </summary>
              <div class="px-5 pb-5 text-sm text-text-secondary leading-relaxed border-t border-border-subtle pt-4">
                {item.a}
              </div>
            </details>
          ))}
        </div>
      </div>
    </section>
  </main>

  <Footer />

  <!-- Schema.org BreadcrumbList -->
  <script type="application/ld+json" set:html={JSON.stringify({
    "@context": "https://schema.org",
    "@type": "BreadcrumbList",
    "itemListElement": [
      { "@type": "ListItem", "position": 1, "name": "Accueil", "item": Astro.site?.toString() },
      { "@type": "ListItem", "position": 2, "name": "Outils" },
    ],
  })} />

  <!-- Schema.org FAQPage -->
  <script type="application/ld+json" set:html={JSON.stringify({
    "@context": "https://schema.org",
    "@type": "FAQPage",
    "mainEntity": faq.map(item => ({
      "@type": "Question",
      "name": item.q,
      "acceptedAnswer": {
        "@type": "Answer",
        "text": item.a,
      },
    })),
  })} />
</BaseLayout>
