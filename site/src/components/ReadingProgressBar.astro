<!-- Reading progress bar - fixed at top of viewport -->
<div
  id="reading-progress"
  class="fixed top-0 left-0 h-[3px] bg-primary z-[60] transition-[width] duration-100 ease-out"
  style="width: 0%"
  role="progressbar"
  aria-label="Progression de lecture"
  aria-valuenow="0"
  aria-valuemin="0"
  aria-valuemax="100"
></div>

<script>
  const bar = document.getElementById('reading-progress');
  if (bar) {
    function updateProgress() {
      const scrollTop = window.scrollY;
      const docHeight = document.documentElement.scrollHeight - window.innerHeight;
      if (docHeight <= 0) return;
      const pct = Math.min(100, Math.round((scrollTop / docHeight) * 100));
      bar.style.width = pct + '%';
      bar.setAttribute('aria-valuenow', String(pct));
    }
    window.addEventListener('scroll', updateProgress, { passive: true });
    updateProgress();
  }
</script>
